# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: terraform-google-sql-db
  annotations:
    config.kubernetes.io/local-config: "true"
spec:
  info:
    title: terraform-google-sql for PostgreSQL
    source:
      repo: https://github.com/terraform-google-modules/terraform-google-sql-db.git
      sourceType: git
      dir: /modules/postgresql
    version: 26.1.1
    actuationTool:
      flavor: Terraform
      version: ">= 1.3"
    description: {}
  content:
    examples:
      - name: mssql-failover-replica
        location: examples/mssql-failover-replica
      - name: mssql-public
        location: examples/mssql-public
      - name: mysql-backup-create-service-account
        location: examples/mysql-backup-create-service-account
      - name: mysql-ha
        location: examples/mysql-ha
      - name: mysql-private
        location: examples/mysql-private
      - name: mysql-psc
        location: examples/mysql-psc
      - name: mysql-public
        location: examples/mysql-public
      - name: postgresql-backup-provided-service-account
        location: examples/postgresql-backup-provided-service-account
      - name: postgresql-ha
        location: examples/postgresql-ha
      - name: postgresql-psc
        location: examples/postgresql-psc
      - name: postgresql-public
        location: examples/postgresql-public
      - name: postgresql-public-iam
        location: examples/postgresql-public-iam
      - name: postgresql-with-cross-region-failover
        location: examples/postgresql-with-cross-region-failover
      - name: private_service_access
        location: examples/private_service_access
  interfaces:
    variables:
      - name: project_id
        description: The project ID to manage the Cloud SQL resources
        varType: string
        required: true
      - name: region
        description: The region of the Cloud SQL resources
        varType: string
        defaultValue: us-central1
      - name: name
        description: The name of the Cloud SQL instance
        varType: string
        required: true
      - name: edition
        description: The edition of the Cloud SQL instance, can be ENTERPRISE or ENTERPRISE_PLUS.
        varType: string
      - name: database_version
        description: The database version to use. Can be 9_6, 14, 15, 16, 17.
        varType: string
        required: true
      - name: maintenance_version
        description: The current software version on the instance. This attribute can not be set during creation. Refer to available_maintenance_versions attribute to see what maintenance_version are available for upgrade. When this attribute gets updated, it will cause an instance restart. Setting a maintenance_version value that is older than the current one on the instance will be ignored
        varType: string
      - name: availability_type
        description: The availability type for the Cloud SQL instance.This is only used to set up high availability for the PostgreSQL instance. Can be either `ZONAL` or `REGIONAL`.
        varType: string
        defaultValue: ZONAL
      - name: enable_default_db
        description: Enable or disable the creation of the default database
        varType: bool
        defaultValue: true
      - name: db_name
        description: The name of the default database to create. This should be unique per Cloud SQL instance.
        varType: string
        defaultValue: default
      - name: enable_default_user
        description: Enable or disable the creation of the default user
        varType: bool
        defaultValue: true
      - name: user_name
        description: The name of the default user
        varType: string
        defaultValue: default
      - name: user_password
        description: The password for the default user. If not set, a random one will be generated and available in the generated_user_password output variable.
        varType: string
        defaultValue: ""
      - name: root_password
        description: Initial root password during creation
        varType: string
      - name: deletion_protection
        description: Used to block Terraform from deleting a SQL Instance.
        varType: bool
        defaultValue: true
      - name: database_flags
        description: The database flags for the Cloud SQL instance. See [more details](https://cloud.google.com/sql/docs/postgres/flags)
        varType: |-
          list(object({
              name  = string
              value = string
            }))
        defaultValue: []
      - name: database_deletion_policy
        description: "The deletion policy for the database. Setting ABANDON allows the resource to be abandoned rather than deleted. This is useful for Postgres, where databases cannot be deleted from the API if there are users other than cloudsqlsuperuser with access. Possible values are: \"ABANDON\"."
        varType: string
      - name: user_deletion_policy
        description: "The deletion policy for the user. Setting ABANDON allows the resource to be abandoned rather than deleted. This is useful for Postgres, where users cannot be deleted from the API if they have been granted SQL roles. Possible values are: \"ABANDON\"."
        varType: string
      - name: data_cache_enabled
        description: Whether data cache is enabled for the instance. Defaults to false. Feature is only available for ENTERPRISE_PLUS tier and supported database_versions
        varType: bool
        defaultValue: false
      - name: additional_users
        description: A list of users to be created in your cluster. A random password would be set for the user if the `random_password` variable is set.
        varType: |-
          list(object({
              name            = string
              password        = string
              random_password = bool
            }))
        defaultValue: []
      - name: additional_databases
        description: A list of databases to be created in your cluster
        varType: |-
          list(object({
              name      = string
              charset   = string
              collation = string
            }))
        defaultValue: []
      - name: master_instance_name
        description: Name of the master instance if this is a failover replica. Required for creating failover replica instance. Not needed for master instance. When removed, next terraform apply will promote this failover failover replica instance as master instance
        varType: string
      - name: failover_dr_replica_name
        description: If the instance is a primary instance, then this field identifies the disaster recovery (DR) replica. The standard format of this field is "your-project:your-instance". You can also set this field to "your-instance", but cloud SQL backend will convert it to the aforementioned standard format.
        varType: string
      - name: instance_type
        description: The type of the instance. The supported values are SQL_INSTANCE_TYPE_UNSPECIFIED, CLOUD_SQL_INSTANCE, ON_PREMISES_INSTANCE and READ_REPLICA_INSTANCE. Set to READ_REPLICA_INSTANCE if master_instance_name value is provided
        varType: string
        defaultValue: CLOUD_SQL_INSTANCE
      - name: random_instance_name
        description: Sets random suffix at the end of the Cloud SQL resource name
        varType: bool
        defaultValue: false
      - name: tier
        description: The tier for the Cloud SQL instance, for ADC its defualt value will be db-perf-optimized-N-8 which is tier value for edtion ENTERPRISE_PLUS, if user wants to change the edition, he should chose compatible tier.
        varType: string
        defaultValue: db-f1-micro
      - name: zone
        description: "The zone for the Cloud SQL instance, it should be something like: `us-central1-a`, `us-east1-c`."
        varType: string
      - name: secondary_zone
        description: "The preferred zone for the replica instance, it should be something like: `us-central1-a`, `us-east1-c`."
        varType: string
      - name: follow_gae_application
        description: A Google App Engine application whose zone to remain in. Must be in the same region as this instance.
        varType: string
      - name: activation_policy
        description: The activation policy for the Cloud SQL instance.Can be either `ALWAYS`, `NEVER` or `ON_DEMAND`.
        varType: string
        defaultValue: ALWAYS
      - name: deletion_protection_enabled
        description: Enables protection of an Cloud SQL instance from accidental deletion across all surfaces (API, gcloud, Cloud Console and Terraform).
        varType: bool
        defaultValue: false
      - name: read_replica_deletion_protection_enabled
        description: Enables protection of replica instance from accidental deletion across all surfaces (API, gcloud, Cloud Console and Terraform).
        varType: bool
        defaultValue: false
      - name: disk_autoresize
        description: Configuration to increase storage size.
        varType: bool
        defaultValue: true
      - name: disk_autoresize_limit
        description: The maximum size to which storage can be auto increased.
        varType: number
        defaultValue: 0
      - name: disk_size
        description: The disk size (in GB) for the Cloud SQL instance.
        varType: number
        defaultValue: 10
      - name: disk_type
        description: The disk type for the Cloud SQL instance.
        varType: string
        defaultValue: PD_SSD
      - name: pricing_plan
        description: The pricing plan for the Cloud SQL instance.
        varType: string
        defaultValue: PER_USE
      - name: maintenance_window_day
        description: The day of week (1-7) for the Cloud SQL instance maintenance.
        varType: number
        defaultValue: 1
      - name: maintenance_window_hour
        description: The hour of day (0-23) maintenance window for the Cloud SQL instance maintenance.
        varType: number
        defaultValue: 23
      - name: maintenance_window_update_track
        description: The update track of maintenance window for the Cloud SQL instance maintenance.Can be either `canary` or `stable`.
        varType: string
        defaultValue: canary
      - name: user_labels
        description: The key/value labels for the Cloud SQL instances.
        varType: map(string)
        defaultValue: {}
      - name: deny_maintenance_period
        description: The Deny Maintenance Period fields to prevent automatic maintenance from occurring during a 90-day time period. List accepts only one value. See [more details](https://cloud.google.com/sql/docs/postgres/maintenance)
        varType: |-
          list(object({
              end_date   = string
              start_date = string
              time       = string
            }))
        defaultValue: []
      - name: backup_configuration
        description: The backup_configuration settings subblock for the database setings
        varType: |-
          object({
              enabled                        = optional(bool, false)
              start_time                     = optional(string)
              location                       = optional(string)
              point_in_time_recovery_enabled = optional(bool, false)
              transaction_log_retention_days = optional(string)
              retained_backups               = optional(number)
              retention_unit                 = optional(string)
            })
        defaultValue: {}
      - name: insights_config
        description: The insights_config settings for the database.
        varType: |-
          object({
              query_plans_per_minute  = optional(number, 5)
              query_string_length     = optional(number, 1024)
              record_application_tags = optional(bool, false)
              record_client_address   = optional(bool, false)
            })
      - name: password_validation_policy_config
        description: The password validation policy settings for the database instance.
        varType: |-
          object({
              min_length                  = optional(number)
              complexity                  = optional(string)
              reuse_interval              = optional(number)
              disallow_username_substring = optional(bool)
              password_change_interval    = optional(string)
            })
      - name: ip_configuration
        description: The ip configuration for the Cloud SQL instances.
        varType: |-
          object({
              authorized_networks                           = optional(list(map(string)), [])
              ipv4_enabled                                  = optional(bool, true)
              private_network                               = optional(string)
              ssl_mode                                      = optional(string)
              allocated_ip_range                            = optional(string)
              enable_private_path_for_google_cloud_services = optional(bool, false)
              psc_enabled                                   = optional(bool, false)
              psc_allowed_consumer_projects                 = optional(list(string), [])
              server_ca_mode                                = optional(string)
              server_ca_pool                                = optional(string)
              custom_subject_alternative_names              = optional(list(string), [])
            })
        defaultValue: {}
        connections:
          - source:
              source: github.com/terraform-google-modules/terraform-google-network//modules/vpc
              version: ">= 9.1"
            spec:
              outputExpr: network_id
              inputPath: private_network
      - name: read_replicas
        description: List of read replicas to create. Encryption key is required for replica in different region. For replica in same region as master set encryption_key_name = null
        varType: |-
          list(object({
              name                  = string
              name_override         = optional(string)
              tier                  = optional(string)
              edition               = optional(string)
              availability_type     = optional(string)
              zone                  = optional(string)
              disk_type             = optional(string)
              disk_autoresize       = optional(bool)
              disk_autoresize_limit = optional(number)
              disk_size             = optional(string)
              user_labels           = map(string)
              database_flags = optional(list(object({
                name  = string
                value = string
              })), [])
              insights_config = optional(object({
                query_plans_per_minute  = optional(number, 5)
                query_string_length     = optional(number, 1024)
                record_application_tags = optional(bool, false)
                record_client_address   = optional(bool, false)
              }), null)
              ip_configuration = object({
                authorized_networks                           = optional(list(map(string)), [])
                ipv4_enabled                                  = optional(bool)
                private_network                               = optional(string)
                ssl_mode                                      = optional(string)
                allocated_ip_range                            = optional(string)
                enable_private_path_for_google_cloud_services = optional(bool, false)
                psc_enabled                                   = optional(bool, false)
                psc_allowed_consumer_projects                 = optional(list(string), [])
              })
              encryption_key_name = optional(string)
              data_cache_enabled  = optional(bool)
            }))
        defaultValue: []
      - name: read_replica_name_suffix
        description: The optional suffix to add to the read instance name
        varType: string
        defaultValue: ""
      - name: db_charset
        description: The charset for the default database
        varType: string
        defaultValue: ""
      - name: db_collation
        description: "The collation for the default database. Example: 'en_US.UTF8'"
        varType: string
        defaultValue: ""
      - name: iam_users
        description: A list of IAM users to be created in your CloudSQL instance. iam.users.type can be CLOUD_IAM_USER, CLOUD_IAM_SERVICE_ACCOUNT, CLOUD_IAM_GROUP and is required for type CLOUD_IAM_GROUP (IAM groups)
        varType: |-
          list(object({
              id    = string,
              email = string,
              type  = optional(string)
            }))
        defaultValue: []
        connections:
          - source:
              source: github.com/terraform-google-modules/terraform-google-service-accounts//modules/simple-sa
              version: ">= 4.4"
            spec:
              outputExpr: "{\"id\": account_details.id, \"email\": account_details.email, \"type\": \"CLOUD_IAM_SERVICE_ACCOUNT\"}"
          - source:
              source: github.com/GoogleCloudPlatform/terraform-google-cloud-run//modules/v2
              version: ">= 0.14"
            spec:
              outputExpr: "{\"id\": service_account_id.id, \"email\": service_account_id.email, \"type\": \"CLOUD_IAM_SERVICE_ACCOUNT\"}"
          - source:
              source: github.com/terraform-google-modules/terraform-google-vm//modules/instance_template
              version: ">= 13.2.0"
            spec:
              outputExpr: "{\"id\": service_account_info.id, \"email\": service_account_info.email, \"type\": \"CLOUD_IAM_SERVICE_ACCOUNT\"}"
      - name: create_timeout
        description: The optional timout that is applied to limit long database creates.
        varType: string
        defaultValue: 30m
      - name: update_timeout
        description: The optional timout that is applied to limit long database updates.
        varType: string
        defaultValue: 30m
      - name: delete_timeout
        description: The optional timout that is applied to limit long database deletes.
        varType: string
        defaultValue: 30m
      - name: encryption_key_name
        description: The full path to the encryption key used for the CMEK disk encryption
        varType: string
      - name: module_depends_on
        description: List of modules or resources this module depends on.
        varType: list(any)
        defaultValue: []
      - name: read_replica_deletion_protection
        description: Used to block Terraform from deleting replica SQL Instances.
        varType: bool
        defaultValue: false
      - name: enable_random_password_special
        description: Enable special characters in generated random passwords.
        varType: bool
        defaultValue: false
      - name: connector_enforcement
        description: Enforce that clients use the connector library
        varType: bool
        defaultValue: false
      - name: enable_google_ml_integration
        description: Enable database ML integration
        varType: bool
        defaultValue: false
      - name: enable_dataplex_integration
        description: Enable database Dataplex integration
        varType: bool
        defaultValue: false
      - name: database_integration_roles
        description: The roles required by default database instance service account for integration with GCP services
        varType: list(string)
        defaultValue: []
      - name: use_autokey
        description: Enable the use of autokeys from Google Cloud KMS for CMEK. This requires autokey already configured in the project
        varType: bool
        defaultValue: false
      - name: create_kms_key_handle
        description: KeyHandles cannot be deleted from Google Cloud Platform. Destroying a Terraform-managed KeyHandle will remove it from state but will not delete the resource from the project. Set this to false if key handle already exists
        varType: bool
        defaultValue: true
      - name: kms_key_handle_name
        description: key handle name. If not provided module will use instance name as key handle name
        varType: string
      - name: retain_backups_on_delete
        description: When this parameter is set to true, Cloud SQL retains backups of the instance even after the instance is deleted. The ON_DEMAND backup will be retained until customer deletes the backup or the project. The AUTOMATED backup will be retained based on the backups retention setting.
        varType: bool
        defaultValue: false
    outputs:
      - name: additional_user_passwords_map
        description: Map of auto generated passwords for the additional users
      - name: additional_users
        description: List of maps of additional users and passwords
        type:
          - tuple
          - []
      - name: apphub_service_uri
        description: Service URI in CAIS style to be used by Apphub.
        type:
          - object
          - location: string
            service_id: string
            service_uri: string
      - name: dns_name
        description: DNS name of the instance endpoint
        type: string
      - name: env_vars
        description: Exported environment variables
        type:
          - object
          - CLOUD_SQL_DATABASE_CONNECTION_NAME: string
            CLOUD_SQL_DATABASE_HOST: string
            CLOUD_SQL_DATABASE_NAME: string
      - name: generated_user_password
        description: The auto generated default user password if not input password was provided
        type: string
      - name: iam_users
        description: The list of the IAM users with access to the CloudSQL instance
        type:
          - list
          - - object
            - email: string
              id: string
      - name: instance_connection_name
        description: The connection name of the master instance to be used in connection strings
        type: string
      - name: instance_first_ip_address
        description: The first IPv4 address of the addresses assigned.
        type: string
      - name: instance_ip_address
        description: The IPv4 address assigned for the master instance
        type:
          - list
          - - object
            - ip_address: string
              time_to_retire: string
              type: string
      - name: instance_name
        description: The instance name for the master instance
        type: string
      - name: instance_psc_attachment
        description: The psc_service_attachment_link created for the master instance
        type: string
      - name: instance_self_link
        description: The URI of the master instance
        type: string
      - name: instance_server_ca_cert
        description: The CA certificate information used to connect to the SQL instance via SSL
        type:
          - list
          - - object
            - cert: string
              common_name: string
              create_time: string
              expiration_time: string
              sha1_fingerprint: string
      - name: instance_service_account_email_address
        description: The service account email address assigned to the master instance
        type: string
      - name: instances
        description: A list of all `google_sql_database_instance` resources we've created
        type:
          - tuple
          - - - object
              - available_maintenance_versions:
                  - list
                  - string
                clone:
                  - list
                  - - object
                    - allocated_ip_range: string
                      database_names:
                        - list
                        - string
                      point_in_time: string
                      preferred_zone: string
                      source_instance_name: string
                connection_name: string
                database_version: string
                deletion_protection: bool
                dns_name: string
                encryption_key_name: string
                first_ip_address: string
                id: string
                instance_type: string
                ip_address:
                  - list
                  - - object
                    - ip_address: string
                      time_to_retire: string
                      type: string
                maintenance_version: string
                master_instance_name: string
                name: string
                private_ip_address: string
                project: string
                psc_service_attachment_link: string
                public_ip_address: string
                region: string
                replica_configuration:
                  - list
                  - - object
                    - ca_certificate: string
                      client_certificate: string
                      client_key: string
                      connect_retry_interval: number
                      dump_file_path: string
                      failover_target: bool
                      master_heartbeat_period: number
                      password: string
                      ssl_cipher: string
                      username: string
                      verify_server_certificate: bool
                restore_backup_context:
                  - list
                  - - object
                    - backup_run_id: number
                      instance_id: string
                      project: string
                root_password: string
                self_link: string
                server_ca_cert:
                  - list
                  - - object
                    - cert: string
                      common_name: string
                      create_time: string
                      expiration_time: string
                      sha1_fingerprint: string
                service_account_email_address: string
                settings:
                  - list
                  - - object
                    - activation_policy: string
                      active_directory_config:
                        - list
                        - - object
                          - domain: string
                      advanced_machine_features:
                        - list
                        - - object
                          - threads_per_core: number
                      availability_type: string
                      backup_configuration:
                        - list
                        - - object
                          - backup_retention_settings:
                              - list
                              - - object
                                - retained_backups: number
                                  retention_unit: string
                            binary_log_enabled: bool
                            enabled: bool
                            location: string
                            point_in_time_recovery_enabled: bool
                            start_time: string
                            transaction_log_retention_days: number
                      collation: string
                      connector_enforcement: string
                      data_cache_config:
                        - list
                        - - object
                          - data_cache_enabled: bool
                      database_flags:
                        - set
                        - - object
                          - name: string
                            value: string
                      deletion_protection_enabled: bool
                      deny_maintenance_period:
                        - list
                        - - object
                          - end_date: string
                            start_date: string
                            time: string
                      disk_autoresize: bool
                      disk_autoresize_limit: number
                      disk_size: number
                      disk_type: string
                      edition: string
                      enable_dataplex_integration: bool
                      enable_google_ml_integration: bool
                      insights_config:
                        - list
                        - - object
                          - query_insights_enabled: bool
                            query_plans_per_minute: number
                            query_string_length: number
                            record_application_tags: bool
                            record_client_address: bool
                      ip_configuration:
                        - list
                        - - object
                          - allocated_ip_range: string
                            authorized_networks:
                              - set
                              - - object
                                - expiration_time: string
                                  name: string
                                  value: string
                            enable_private_path_for_google_cloud_services: bool
                            ipv4_enabled: bool
                            private_network: string
                            psc_config:
                              - set
                              - - object
                                - allowed_consumer_projects:
                                    - set
                                    - string
                                  psc_enabled: bool
                            server_ca_mode: string
                            ssl_mode: string
                      location_preference:
                        - list
                        - - object
                          - follow_gae_application: string
                            secondary_zone: string
                            zone: string
                      maintenance_window:
                        - list
                        - - object
                          - day: number
                            hour: number
                            update_track: string
                      password_validation_policy:
                        - list
                        - - object
                          - complexity: string
                            disallow_username_substring: bool
                            enable_password_policy: bool
                            min_length: number
                            password_change_interval: string
                            reuse_interval: number
                      pricing_plan: string
                      sql_server_audit_config:
                        - list
                        - - object
                          - bucket: string
                            retention_interval: string
                            upload_interval: string
                      tier: string
                      time_zone: string
                      user_labels:
                        - map
                        - string
                      version: number
                timeouts:
                  - object
                  - create: string
                    delete: string
                    update: string
      - name: primary
        description: The `google_sql_database_instance` resource representing the primary instance
        type:
          - object
          - available_maintenance_versions:
              - list
              - string
            clone:
              - list
              - - object
                - allocated_ip_range: string
                  database_names:
                    - list
                    - string
                  point_in_time: string
                  preferred_zone: string
                  source_instance_name: string
            connection_name: string
            database_version: string
            deletion_protection: bool
            dns_name: string
            encryption_key_name: string
            first_ip_address: string
            id: string
            instance_type: string
            ip_address:
              - list
              - - object
                - ip_address: string
                  time_to_retire: string
                  type: string
            maintenance_version: string
            master_instance_name: string
            name: string
            private_ip_address: string
            project: string
            psc_service_attachment_link: string
            public_ip_address: string
            region: string
            replica_configuration:
              - list
              - - object
                - ca_certificate: string
                  client_certificate: string
                  client_key: string
                  connect_retry_interval: number
                  dump_file_path: string
                  failover_target: bool
                  master_heartbeat_period: number
                  password: string
                  ssl_cipher: string
                  username: string
                  verify_server_certificate: bool
            restore_backup_context:
              - list
              - - object
                - backup_run_id: number
                  instance_id: string
                  project: string
            root_password: string
            self_link: string
            server_ca_cert:
              - list
              - - object
                - cert: string
                  common_name: string
                  create_time: string
                  expiration_time: string
                  sha1_fingerprint: string
            service_account_email_address: string
            settings:
              - list
              - - object
                - activation_policy: string
                  active_directory_config:
                    - list
                    - - object
                      - domain: string
                  advanced_machine_features:
                    - list
                    - - object
                      - threads_per_core: number
                  availability_type: string
                  backup_configuration:
                    - list
                    - - object
                      - backup_retention_settings:
                          - list
                          - - object
                            - retained_backups: number
                              retention_unit: string
                        binary_log_enabled: bool
                        enabled: bool
                        location: string
                        point_in_time_recovery_enabled: bool
                        start_time: string
                        transaction_log_retention_days: number
                  collation: string
                  connector_enforcement: string
                  data_cache_config:
                    - list
                    - - object
                      - data_cache_enabled: bool
                  database_flags:
                    - set
                    - - object
                      - name: string
                        value: string
                  deletion_protection_enabled: bool
                  deny_maintenance_period:
                    - list
                    - - object
                      - end_date: string
                        start_date: string
                        time: string
                  disk_autoresize: bool
                  disk_autoresize_limit: number
                  disk_size: number
                  disk_type: string
                  edition: string
                  enable_dataplex_integration: bool
                  enable_google_ml_integration: bool
                  insights_config:
                    - list
                    - - object
                      - query_insights_enabled: bool
                        query_plans_per_minute: number
                        query_string_length: number
                        record_application_tags: bool
                        record_client_address: bool
                  ip_configuration:
                    - list
                    - - object
                      - allocated_ip_range: string
                        authorized_networks:
                          - set
                          - - object
                            - expiration_time: string
                              name: string
                              value: string
                        enable_private_path_for_google_cloud_services: bool
                        ipv4_enabled: bool
                        private_network: string
                        psc_config:
                          - set
                          - - object
                            - allowed_consumer_projects:
                                - set
                                - string
                              psc_enabled: bool
                        server_ca_mode: string
                        ssl_mode: string
                  location_preference:
                    - list
                    - - object
                      - follow_gae_application: string
                        secondary_zone: string
                        zone: string
                  maintenance_window:
                    - list
                    - - object
                      - day: number
                        hour: number
                        update_track: string
                  password_validation_policy:
                    - list
                    - - object
                      - complexity: string
                        disallow_username_substring: bool
                        enable_password_policy: bool
                        min_length: number
                        password_change_interval: string
                        reuse_interval: number
                  pricing_plan: string
                  sql_server_audit_config:
                    - list
                    - - object
                      - bucket: string
                        retention_interval: string
                        upload_interval: string
                  tier: string
                  time_zone: string
                  user_labels:
                    - map
                    - string
                  version: number
            timeouts:
              - object
              - create: string
                delete: string
                update: string
      - name: private_ip_address
        description: The first private (PRIVATE) IPv4 address assigned for the master instance
        type: string
      - name: public_ip_address
        description: The first public (PRIMARY) IPv4 address assigned for the master instance
        type: string
      - name: read_replica_instance_names
        description: The instance names for the read replica instances
        type:
          - tuple
          - []
      - name: replicas
        description: A list of `google_sql_database_instance` resources representing the replicas
        type:
          - tuple
          - []
      - name: replicas_instance_connection_names
        description: The connection names of the replica instances to be used in connection strings
        type:
          - tuple
          - []
      - name: replicas_instance_first_ip_addresses
        description: The first IPv4 addresses of the addresses assigned for the replica instances
        type:
          - tuple
          - []
      - name: replicas_instance_self_links
        description: The URIs of the replica instances
        type:
          - tuple
          - []
      - name: replicas_instance_server_ca_certs
        description: The CA certificates information used to connect to the replica instances via SSL
        type:
          - tuple
          - []
      - name: replicas_instance_service_account_email_addresses
        description: The service account email addresses assigned to the replica instances
        type:
          - tuple
          - []
  requirements:
    roles:
      - level: Project
        roles:
          - roles/cloudsql.admin
          - roles/resourcemanager.projectIamAdmin
          - roles/iam.serviceAccountUser
          - roles/compute.networkAdmin
          - roles/cloudkms.admin
          - roles/cloudkms.autokeyAdmin
          - roles/storage.admin
          - roles/cloudkms.cryptoKeyEncrypterDecrypter
          - roles/logging.logWriter
    services:
      - cloudkms.googleapis.com
      - cloudresourcemanager.googleapis.com
      - compute.googleapis.com
      - iam.googleapis.com
      - monitoring.googleapis.com
      - serviceusage.googleapis.com
      - sqladmin.googleapis.com
    providerVersions:
      - source: hashicorp/google
        version: ">= 6.31, < 7"
      - source: hashicorp/google-beta
        version: ">= 6.31, < 7"
      - source: hashicorp/null
        version: ~> 3.1
      - source: hashicorp/random
        version: ~> 3.1
